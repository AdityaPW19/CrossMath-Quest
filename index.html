<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Math Puzzle</title>
    <!-- Google Font Import -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Success modal remains unchanged -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal">
            <h2>Congratulations!</h2>
            <p>You solved the puzzle!</p>
            <button id="next-level-btn">Next Level</button>
            <button id="play-again-btn">Play Again</button>
        </div>
    </div>

    <!-- New rules modal -->
    <div id="rules-modal" class="modal-overlay">
        <div class="modal rules-modal-content">
            <div class="modal-header">
                <h2>How to Play</h2>
                <button id="close-rules-btn" class="close-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <div class="rules-content">
                <div class="rules-section">
                    <h3>Game Rules</h3>
                    <ul id="game-rules">
                        <li>Fill in the empty cells using numbers from the bank</li>
                        <li>Complete all equations horizontally and vertically</li>
                        <li>Each number can only be used once</li>
                        <li>Solve all equations to complete the level</li>
                    </ul>
                </div>
                <div class="rules-section">
                    <h3>Game Info</h3>
                    <ul id="game-info">
                        <!-- This will be populated from puzzles.json -->
                    </ul>
                </div>
            </div>
            <button id="back-from-rules-btn" class="primary-btn">Back to Menu</button>
        </div>
    </div>

    <div class="app-wrapper">
        <div class="title-container">
            <img id="title-logo" src="assets/title-logo.png" alt="CrossMath Puzzle">
        </div>

        <div class="container">
            <!-- Updated start-content with welcome message and player info -->
            <div id="start-content">
                <div class="start-header">
                    <div class="welcome-container">
                        <h2 id="welcome-message">Welcome!</h2>
                        <p id="player-level-info">Ready to solve some puzzles?</p>
                    </div>
                    <button id="info-btn" class="icon-btn">
                        <span class="info-icon">i</span>
                    </button>
                </div>
                <p>Select a difficulty to start!</p>
                <div class="difficulty-selector">
                    <!-- Existing difficulty buttons remain unchanged -->
                    <button id="easy-btn" class="difficulty-btn">
                        <span>Easy</span>
                    </button>
                    <button id="medium-btn" class="difficulty-btn" disabled>
                        <span>Medium</span>
                        <svg class="lock-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                        </svg>
                    </button>
                    <button id="hard-btn" class="difficulty-btn" disabled>
                        <span>Hard</span>
                        <svg class="lock-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Game content remains unchanged -->
            <div id="game-content">
                <div class="game-header">
                    <div class="header-left">
                        <button id="back-btn" class="icon-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                            </svg>
                        </button>
                        <button id="reset-btn" class="icon-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path
                                    d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                            </svg>
                        </button>
                    </div>
                    <div class="header-center">
                        <h2 id="level-display">Level 1</h2>
                    </div>
                    <div class="header-right">
                        <span id="difficulty-display">Easy</span>
                    </div>
                </div>

                <div id="puzzle-container">
                    <div id="crossword-grid"></div>
                </div>

                <div id="number-bank-container">
                    <h2>Numbers</h2>
                    <div id="number-bank"></div>
                </div>

                <div class="game-footer">
                    <button id="clear-btn" class="clear-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                        </svg>
                        <span>Clear</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="debug-panel" class="debug-panel">
        <div class="debug-header">
            <h3>Debug Mode</h3>
            <button id="toggle-debug-btn" class="icon-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                </svg>
            </button>
        </div>
        <div class="debug-content">
            <div class="level-jump-section">
                <h4>Jump to Level:</h4>
                <div class="level-input-group">
                    <input type="number" id="level-input" min="1" max="22" value="1">
                    <button id="jump-level-btn" class="debug-btn">Go</button>
                </div>
            </div>
            <div class="quick-actions">
                <button id="validate-grid-btn" class="debug-btn">Validate Grid</button>
                <button id="reset-progress-btn" class="debug-btn danger">Reset Progress</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>